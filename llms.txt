# html-preview (jplawdb) / DB Portal for AI
#
# 重要（モバイルAI制約）
# - 1回のReadで「先頭1万トークンのみ」読める前提で設計しています。
# - したがって「軽い索引で絞る → 本文に最短到達」が基本です。

## 0) このリポジトリにあるもの

- HTML Preview Tool: `/html-preview/index.html`
- AI向け 日本税法（主要税法・条文）: `/html-preview/ai-law-db/`
- AI向け 日本税務通達（基本通達ほか）: `/html-preview/ai-tsutatsu-db/`
- AI向け 日本税務判決DB（判決・裁決）: `/html-preview/ai-hanketsu-db/`
- AI向け 文献DB（税務・国際課税）: `/html-preview/ai-paper-db/`
- AI向け 租税条約DB（主要国）: `/html-preview/ai-treaty-db/`
- Tax KB Prototype: `/html-preview/tax-kb/`

## 1) 条文（法令）を引きたい → ai-law-db

入口（最短）
- `/html-preview/ai-law-db/quickstart.txt`（推奨: まずこれ）

高速フロー
- 条番号が分かる: `ai-law-db/text/{law_code}/{article}.txt` を直叩き（最短）
- 条番号が曖昧/条名から探したい: `ai-law-db/data/resolve_meta_corp/index.json` → 必要な `{bucket}.json`
- 根拠URLが必要: `ai-law-db/enhanced/{law_code}/{article}.html#pX` / `#pX-iY`

## 2) 通達（基本通達ほか）を引きたい → ai-tsutatsu-db

入口
- `/html-preview/ai-tsutatsu-db/llms.txt`

高速フロー
1) `ai-tsutatsu-db/data/doc_aliases.json` で `doc_code` を確定
2) `ai-tsutatsu-db/data/resolve_lite/{doc_code}.json` で `item_id` を確定
3) 本文: `ai-tsutatsu-db/text/{doc_code}/{item_id}.txt`
4) 根拠URL: `ai-tsutatsu-db/enhanced/{doc_code}/{item_id}.html#pX`

## 3) 判決/裁決を調べたい → ai-hanketsu-db

入口（最短）
- `/html-preview/ai-hanketsu-db/quickstart.txt`

典型フロー（法人税）
1) `ai-hanketsu-db/houjinzei/llms.txt`
2) `ai-hanketsu-db/houjinzei/data/shards_index.json`
3) `ai-hanketsu-db/houjinzei/data/shards/shard-XX.txt`（TSVを検索）
4) `ai-hanketsu-db/houjinzei/core/{id}.txt`（要約本文）

NOTE
- `ai-hanketsu-db/.../core/batch-*.txt` は内部用。入口ナビには使わない。

## 4) OECD/国税庁ガイドライン等（文献）を引きたい → ai-paper-db

入口
- `/html-preview/ai-paper-db/llms.txt`

収録（移転価格）
- OECD TPG 2022（参考仮訳）: `ai-paper-db/oecd-tpg-2022/quickstart.txt`
- 国税庁（NTA）移転価格（事務運営指針/参考事例集）: `ai-paper-db/nta-tp-audit/quickstart.txt`
- OECD/G20 BEPS（選抜）: `ai-paper-db/oecd-beps/quickstart.txt`

典型フロー（packs/shards型）
1) `data/shards_index.json`
2) `data/shards/shard-XX.txt`（TSVを検索）
3) `packs/...`（本文。1ファイル≒1万トークン以内に収める）

## 5) Tax KB（PageIndex型）で “調査メモ＋根拠アンカー” を回したい → tax-kb

入口
- `/html-preview/tax-kb/quickstart.txt`
- `/html-preview/tax-kb/llms.txt`

## 6) 租税条約を引きたい → ai-treaty-db

入口
- `/html-preview/ai-treaty-db/llms.txt`
- `/html-preview/ai-treaty-db/jp-tax-treaties/quickstart.txt`（推奨: まずこれ）

典型フロー（packs/shards型）
1) `ai-treaty-db/jp-tax-treaties/data/shards_index.json`
2) `ai-treaty-db/jp-tax-treaties/data/shards/shard-XXX.txt`（TSVを検索）
3) `ai-treaty-db/jp-tax-treaties/packs/...`（本文。1ファイル≒1万トークン以内）

## 最後に

迷ったら:
- 条文 = `ai-law-db/quickstart.txt`
- 通達 = `ai-tsutatsu-db/llms.txt`
- 判決 = `ai-hanketsu-db/quickstart.txt`
- 文献 = `ai-paper-db/llms.txt`
- 租税条約 = `ai-treaty-db/llms.txt`
